# codex-managed: keep aligned with deployment automation templates
# ─────────────────────────────────────────────────────────
# Core ports (may differ per stage)
API_PORT=9000
FRONTEND_PORT=3000

# ─────────────────────────────────────────────────────────
# Public API base used by the frontend (mounted under /lexi)
# Example: your Cloudflare/Nginx proxy forwards /lexi → backend
LEX_API_BASE_PUBLIC=https://api.lexicompanion.com/lexi

# ─────────────────────────────────────────────────────────
# Comfy endpoints — the backend (server-side) will talk to these.
# Prefer host.docker.internal (mapped via compose extra_hosts)
COMFY_URL=http://host.docker.internal:8188
COMFY_BASE_URL=http://host.docker.internal:8188
IMAGE_API_BASE=http://host.docker.internal:8188

# ─────────────────────────────────────────────────────────
# Models & assets
# Use a single base path and derive specific subpaths in code.
# Override BASE_MODELS_DIR per host/stage (examples below).
BASE_MODELS_DIR=/mnt/data/models
COMFY_WORKSPACE_DIR=/mnt/data/comfy
# Flux defaults (override per host as needed)
FLUX_MODELS_DIR=${COMFY_WORKSPACE_DIR}/models
FLUX_DIFFUSION_DIR=${FLUX_MODELS_DIR}/diffusion_models
FLUX_TEXT_ENCODER_DIR=${FLUX_MODELS_DIR}/clip
FLUX_VAE_PATH=${FLUX_MODELS_DIR}/vae/ae.safetensors
FLUX_MODEL_VARIANT=kontext-dev
LEXI_STATIC_DIR=/app/frontend/public
LEX_AVATAR_DIR=/app/frontend/public/avatars
AVATARS_PUBLIC_DIR=/app/frontend/public/avatars
AVATARS_PUBLIC_URL=/lexi/static/avatars
LEX_IMAGE_DIR=/app/frontend/public/avatars

# ─────────────────────────────────────────────────────────
# LLM / OpenAI-compatible backends (example non-prod gateway)
OPENAI_API_BASE=http://172.17.0.1:8008/v1
LLM_API_BASE=http://172.17.0.1:8008/v1
SUMMARIZER_ENDPOINT=http://172.17.0.1:8008/v1/chat/completions
ENABLE_NOW=0
LEXI_ENABLE_NOW=0
OPENAI_API_KEY=dummy

# Live data / movies tool (set at least one)
TMDB_API_KEY=
TMDB_READ_ACCESS_TOKEN=

# ─────────────────────────────────────────────────────────
# Logging
LEX_LOG_DIR=./logs/sessions

# ─────────────────────────────────────────────────────────
# NOTE:
# 1) Copy this file to .env.development and .env.production and adjust.
# 2) Real secrets belong ONLY in actual runtime env (.env files not committed),
#    Docker/Swarm secrets, or a vault — never in git.
